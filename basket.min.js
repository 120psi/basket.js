(function(a,b){function c(){var a="basket-",c=[],d=0,e=0,f=[],g=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.onreadystatechange=function(a){c.readyState===4&&b(c.responseText)},c.send()},h=function(a,b,c){g(a,function(a){localStorage.setItem(b,a),i(c)&&c()})},i=function(a){return Object.prototype.toString.call(a)=="[object Function]"},j=function(a){var c=b.createElement("script"),d=b.head||b.getElementsByTagName("head")[0];c.defer=!0,c.appendChild(b.createTextNode(a)),d.appendChild(c)},k=function(a){var b,e,g,h;if(d>=a)for(e=0;e<c.length;e++){b=c[e];if(!b)continue;c[e]=null,j(b),d++;for(g=e;g<d;g++)if(h=f[g])f[g]=null,h()}};return{require:function(b){var d=a+b,f=c.length,h=e,i=localStorage.getItem(d);return c[f]=null,i?(c[f]=i,k(h)):g(b,function(a){localStorage.setItem(d,a),c[f]=a,k(h)}),this},add:function(b,c,d){var e=a+b;return c===undefined&&(c=!0),localStorage.getItem(e)?!c||h(b,e,d):h(b,e,d),this},remove:function(b){var c=a+b;return localStorage.removeItem(c),this},wait:function(a){return e=c.length,a&&(d>=e-1?a():f[e-1]=a),this}}}a.basket=c()})(this,document)