/*!
* basket.js
* v0.2.0 - 2012-11-14
* http://addyosmani.github.com/basket.js
* (c) Addy Osmani; MIT License
* Created by: Addy Osmani, Sindre Sorhus, AndrÃ©e Hansson
* Contributors: Ironsjp, Mathias Bynens, Rick Waldron
*/
(function(e,t){"use strict";var n=t.head||t.getElementsByTagName("head")[0],r="basket-",i=[],s=0,o=0,u=[],a=function(e){return{}.toString.call(e)==="[object Function]"},f=function(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.onreadystatechange=function(){n.readyState===4&&n.status===200&&t(n.responseText)},n.send()},l=function(e,t,n,r){f(e,function(e){var i=p(e,n);localStorage.setItem(t,JSON.stringify(i)),a(r)&&r(e)})},c=function(e){var r=t.createElement("script");r.defer=!0,r.text=e,n.appendChild(r)},h=function(e,t){var n,r,o,f;if(s>=e)for(n=0;n<i.length;n++){o=i[n];if(!o)continue;i[n]=null,t&&c(o),s++;for(r=n;r<s;r++)f=u[r],a(f)&&(u[r]=null,f())}},p=function(e,t){var n=+(new Date),r={data:e,stamp:n};return t&&(r.expire=n+t*60*60*1e3),r},d=function(e){var t=r+(e.key||e.url),n=o,s=i.length,u=JSON.parse(localStorage.getItem(t)),f=function(t){i[s]=t,h(n,e.execute)};if(!e.url)return;e.execute=e.execute!==!1,i[s]=null,u&&u.expire&&u.expire- +(new Date)>0?f(u.data):l(e.url,t,e.expire,f),a(e.wait)&&basket.wait(e.wait)};e.basket={require:function(){var e,t;for(e=0,t=arguments.length;e<t;e++)d(arguments[e]);return this},remove:function(e){return localStorage.removeItem(r+e),this},wait:function(e){return o=i.length-1,a(e)&&(s>o?e():u[o]=e),this},get:function(e){return localStorage.getItem(r+e)||null},clear:function(){var e,t=localStorage;for(e in t)e.indexOf(r)===0&&delete t[e];return this}}})(this,document);